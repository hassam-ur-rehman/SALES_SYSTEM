<%- include('../partials/header', { title: title }) %>

<h2><%= title %></h2>

<% if (typeof error_msg !== 'undefined' && error_msg) { %>
    <p style="color: red; border: 1px solid red; padding: 10px; margin-bottom: 15px;"><%= error_msg %></p>
<% } %>
<% if (typeof form_data !== 'undefined' && Object.keys(form_data).length > 0 && typeof error_msg !== 'undefined' && error_msg.toLowerCase().includes('required')) { %>
    <p style="background-color: #fff3cd; border: 1px solid #ffeeba; color: #856404; padding: 10px; margin-bottom:15px;">
        Please correct the errors. Your previous input has been retained.
    </p>
<% } %>

<form action="<%= action %>" method="POST" style="max-width: 700px; margin-top: 20px; padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9; border-radius: 5px;">

    <div style="margin-bottom: 15px;">
        <label for="first_name" style="display: block; margin-bottom: 5px; font-weight: bold;">First Name*:</label>
        <input type="text" id="first_name" name="first_name" value="<%= typeof form_data !== 'undefined' && form_data.first_name ? form_data.first_name : (typeof customer !== 'undefined' ? customer.first_name : '') %>" required style="width: calc(100% - 18px); padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <div style="margin-bottom: 15px;">
        <label for="last_name" style="display: block; margin-bottom: 5px; font-weight: bold;">Last Name:</label>
        <input type="text" id="last_name" name="last_name" value="<%= typeof form_data !== 'undefined' && form_data.last_name ? form_data.last_name : (typeof customer !== 'undefined' ? customer.last_name : '') %>" style="width: calc(100% - 18px); padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <div style="margin-bottom: 15px;">
        <label for="email" style="display: block; margin-bottom: 5px; font-weight: bold;">Email:</label>
        <input type="email" id="email" name="email" value="<%= typeof form_data !== 'undefined' && form_data.email ? form_data.email : (typeof customer !== 'undefined' ? customer.email : '') %>" style="width: calc(100% - 18px); padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <div style="margin-bottom: 15px;">
        <label for="phone" style="display: block; margin-bottom: 5px; font-weight: bold;">Phone:</label>
        <input type="text" id="phone" name="phone" value="<%= typeof form_data !== 'undefined' && form_data.phone ? form_data.phone : (typeof customer !== 'undefined' ? customer.phone : '') %>" style="width: calc(100% - 18px); padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <div style="margin-bottom: 15px;">
        <label for="address" style="display: block; margin-bottom: 5px; font-weight: bold;">Address:</label>
        <textarea id="address" name="address" style="width: calc(100% - 18px); padding: 8px; border: 1px solid #ccc; border-radius: 4px; min-height: 60px;"><%= typeof form_data !== 'undefined' && form_data.address ? form_data.address : (typeof customer !== 'undefined' ? customer.address : '') %></textarea>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="customer_type" style="display: block; margin-bottom: 5px; font-weight: bold;">Customer Type:</label>
        <select id="customer_type" name="customer_type" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            <option value="retail" <%= ( (typeof form_data !== 'undefined' && form_data.customer_type === 'retail') || (typeof customer !== 'undefined' && customer.customer_type === 'retail' && (typeof form_data === 'undefined' || typeof form_data.customer_type === 'undefined')) ) ? 'selected' : '' %>>Retail</option>
            <option value="wholesale" <%= ( (typeof form_data !== 'undefined' && form_data.customer_type === 'wholesale') || (typeof customer !== 'undefined' && customer.customer_type === 'wholesale' && (typeof form_data === 'undefined' || typeof form_data.customer_type === 'undefined')) ) ? 'selected' : '' %>>Wholesale</option>
        </select>
    </div>

    <div style="padding-top: 10px;">
        <button type="submit" style="padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;"><%= submitButtonText %></button>
        <a href="/customer" style="margin-left: 15px; text-decoration: none; color: #007bff; padding: 10px 15px; border: 1px solid #007bff; border-radius: 5px;">Cancel</a>
    </div>
</form>

<%- include('../partials/footer') %>